/* * Build Something 1: Parallax Scrolling */var ScrollyCanvas = (function() {    ScrollyCanvas.prototype.canvas = null;    ScrollyCanvas.prototype.ctx = null;    // Constructor    function ScrollyCanvas() {        // Setup the canvas        this.canvas = document.getElementById("scroller");        this.canvasInit();        // Set the scroll event        var me = this;        $(window).on("scroll", function() {            me.render();        });        // Set the window resize event        $(window).on("resize", function() {            me.canvasInit();            me.render();        });        this.render();    }    // Render    ScrollyCanvas.prototype.render = function() {        var scrollY = $("html").scrollTop();        // hey yo, use things like $(canvas).position().top and $(window).height        // to get the fraction of the canvas visible        // base the animation off of that!        // Set up the background image        var imgBG = new Image();        var me = this;        imgBG.onload = function() {            me.ctx.drawImage(imgBG, 0, 0, me.canvas.width, me.canvas.height);        }        imgBG.src = "images/bg.png";        // If scrolled far past the canvas, don't render these at all (offscreen)        if (scrollY < 2000) {            // Set up the ship image            var imgShip = new Image();            imgShip.onload = function() {                var width = me.canvas.height / 4;                var height = me.canvas.height / 4;                var x = 0;                var y = 0;                // Travelling along normally...                if (scrollY < me.canvas.height / 4) {                    y = me.canvas.height / 6;                    x = scrollY + width;                }                // OMG asteroid, evade!                else if (scrollY < me.canvas.height / 2) {                    y = me.canvas.height / 6 + (scrollY - me.canvas.height / 4);                    x = scrollY + width;                }                // Carry on                else {                    y = 5 * me.canvas.height / 12;                    x = scrollY + width;                }                me.ctx.drawImage(imgShip, x, y, width, height);            }            imgShip.src = "images/ship.png";            // Set up the asteroid image            var imgRock = new Image();            imgRock.onload = function() {                var width = me.canvas.height / 4;                var height = me.canvas.height / 4;                var x = 4 * me.canvas.width / 9 - scrollY / 2;                var y = -1 * height + scrollY;               me.ctx.drawImage(imgRock, x, y, width, height);            }            imgRock.src = "images/rock.png";        }    }    // Resize the canvas    ScrollyCanvas.prototype.canvasInit = function() {        // Set the canvas dimensions        this.canvas.height = $(window).height();        this.canvas.width = $(window).width();        // Get the canvas context        this.ctx = this.canvas.getContext('2d');        // Don't blur our nice pixel art!        this.ctx.mozImageSmoothingEnabled = false;    }    return ScrollyCanvas;})();$(document).ready(function() {    var scrolly = new ScrollyCanvas();});